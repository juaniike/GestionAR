<style>
  .status-badge {
    padding: 0.35em 0.65em;
    font-size: 0.75em;
    font-weight: 600;
    border-radius: 0.375rem;
  }
  .status-paid {
    background-color: #d1fae5;
    color: #065f46;
  }
  .status-pending {
    background-color: #fef3c7;
    color: #92400e;
  }
  .status-canceled {
    background-color: #fee2e2;
    color: #991b1b;
  }

  .payment-badge {
    padding: 0.35em 0.65em;
    font-size: 0.75em;
    font-weight: 500;
    border-radius: 0.375rem;
    background-color: #e0f2fe;
    color: #0369a1;
  }

  .profit-positive {
    color: #059669;
    font-weight: 600;
  }
</style>

<!-- Contenido Principal -->
<div class="container-fluid py-4">
  <!-- Header -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card">
        <div
          class="card-header pb-0 d-flex justify-content-between align-items-center"
        >
          <div>
            <h5>Historial de Ventas</h5>
            <p class="text-sm">Gestiona y consulta todas tus ventas</p>
          </div>
          <div class="d-flex gap-2">
            <button id="btn-reporte-diario" class="btn btn-info btn-sm">
              <i class="material-icons me-1">summarize</i>
              Reporte Diario
            </button>
            <button id="btn-consolidado" class="btn btn-warning btn-sm">
              <i class="material-icons me-1">bar_chart</i>
              Vista Consolidada
            </button>
            <button id="btn-nueva-venta" class="btn btn-success btn-sm">
              <i class="material-icons me-1">add</i>
              Nueva Venta
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tarjetas Resumen -->
  <div class="row mb-4">
    <!-- Ventas Hoy -->
    <div class="col-xl-3 col-sm-6 mb-4">
      <div class="card card-summary success">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <p class="text-sm mb-1">Ventas Hoy</p>
              <h4 id="ventas-hoy-count" class="mb-0">0</h4>
              <small class="text-muted" id="ventas-hoy-total">$0.00</small>
            </div>
            <i class="material-icons text-success opacity-6">today</i>
          </div>
        </div>
      </div>
    </div>

    <!-- Ganancia Hoy -->
    <div class="col-xl-3 col-sm-6 mb-4">
      <div class="card card-summary primary">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <p class="text-sm mb-1">Ganancia Hoy</p>
              <h4 id="ganancia-hoy" class="mb-0 profit-positive">$0.00</h4>
              <small class="text-muted">Utilidad del día</small>
            </div>
            <i class="material-icons text-primary opacity-6">trending_up</i>
          </div>
        </div>
      </div>
    </div>

    <!-- Ventas del Mes -->
    <div class="col-xl-3 col-sm-6 mb-4">
      <div class="card card-summary info">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <p class="text-sm mb-1">Ventas del Mes</p>
              <h4 id="ventas-mes-count" class="mb-0">0</h4>
              <small class="text-muted" id="ventas-mes-total">$0.00</small>
            </div>
            <i class="material-icons text-info opacity-6">calendar_month</i>
          </div>
        </div>
      </div>
    </div>

    <!-- Método de Pago Más Usado -->
    <div class="col-xl-3 col-sm-6 mb-4">
      <div class="card card-summary warning">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <p class="text-sm mb-1">Pago Principal</p>
              <h4 id="metodo-principal" class="mb-0">Efectivo</h4>
              <small class="text-muted">Método más usado</small>
            </div>
            <i class="material-icons text-warning opacity-6">payments</i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Filtros -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card">
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-3">
              <label class="form-label">Fecha Desde</label>
              <input type="date" id="fecha-desde" class="form-control" />
            </div>
            <div class="col-md-3">
              <label class="form-label">Fecha Hasta</label>
              <input type="date" id="fecha-hasta" class="form-control" />
            </div>
            <div class="col-md-2">
              <label class="form-label">Método de Pago</label>
              <select id="filtro-metodo" class="form-select">
                <option value="">Todos</option>
                <option value="cash">Efectivo</option>
                <option value="card">Tarjeta</option>
                <option value="virtualpay">Pago Virtual</option>
              </select>
            </div>
            <div class="col-md-2">
              <label class="form-label">Estado</label>
              <select id="filtro-estado" class="form-select">
                <option value="">Todos</option>
                <option value="paid">Pagada</option>
                <option value="pending">Pendiente</option>
                <option value="canceled">Cancelada</option>
              </select>
            </div>
            <div class="col-md-2">
              <label class="form-label">Usuario</label>
              <select id="filtro-usuario" class="form-select">
                <option value="">Todos</option>
                <!-- Se llenará dinámicamente -->
              </select>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-12 text-end">
              <button id="btn-aplicar-filtros" class="btn btn-primary btn-sm">
                <i class="material-icons me-1">filter_alt</i>
                Aplicar Filtros
              </button>
              <button
                id="btn-limpiar-filtros"
                class="btn btn-outline-secondary btn-sm"
              >
                <i class="material-icons me-1">clear</i>
                Limpiar
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tabla de Ventas -->
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header pb-0">
          <div
            class="d-flex justify-content-between align-items-center flex-wrap gap-2"
          >
            <div>
              <h6>Lista de Ventas</h6>
              <p class="text-sm mb-0" id="table-info">Cargando ventas...</p>
            </div>
            <div class="d-flex gap-2">
              <button
                id="btn-exportar"
                class="btn btn-outline-secondary btn-sm"
              >
                <i class="material-icons me-1">download</i>
                Exportar
              </button>
              <button id="btn-refresh" class="btn btn-outline-primary btn-sm">
                <i class="material-icons me-1">refresh</i>
                Actualizar
              </button>
            </div>
          </div>
        </div>
        <div class="card-body px-0 pt-0 pb-2">
          <div class="table-responsive p-0">
            <table class="table align-items-center mb-0">
              <thead>
                <tr>
                  <th
                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"
                  >
                    ID Venta
                  </th>
                  <th
                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2"
                  >
                    Fecha
                  </th>
                  <th
                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"
                  >
                    Usuario
                  </th>
                  <th
                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"
                  >
                    Total
                  </th>
                  <th
                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"
                  >
                    Ganancia
                  </th>
                  <th
                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"
                  >
                    Método Pago
                  </th>
                  <th
                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"
                  >
                    Estado
                  </th>
                  <th class="text-secondary opacity-7">Acciones</th>
                </tr>
              </thead>
              <tbody id="ventas-table-body">
                <tr>
                  <td colspan="8" class="text-center py-4">
                    <div class="spinner-border" role="status">
                      <span class="visually-hidden">Cargando ventas...</span>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Paginación -->
          <div
            class="card-footer d-flex justify-content-between align-items-center"
          >
            <div class="text-sm text-muted" id="pagination-info">
              Mostrando 0 ventas
            </div>
            <nav>
              <ul
                class="pagination pagination-sm mb-0"
                id="pagination-controls"
              >
                <!-- Controles de paginación -->
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal Detalle Venta -->
<div class="modal fade" id="detalle-venta-modal" tabindex="-1">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
          Detalle de Venta #<span id="detalle-venta-id"></span>
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
        ></button>
      </div>
      <div class="modal-body" id="detalle-venta-content">
        <!-- Contenido del detalle -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cerrar
        </button>
        <button type="button" class="btn btn-primary" id="btn-generar-ticket">
          <i class="material-icons me-1">receipt</i>
          Generar Ticket
        </button>
        <button
          type="button"
          class="btn btn-danger"
          id="btn-cancelar-venta"
          style="display: none"
        >
          <i class="material-icons me-1">cancel</i>
          Cancelar Venta
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Reporte Consolidado -->
<div class="modal fade" id="consolidado-modal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Vista Consolidada de Ventas</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
        ></button>
      </div>
      <div class="modal-body" id="consolidado-content">
        <!-- Contenido consolidado -->
      </div>
    </div>
  </div>
</div>
