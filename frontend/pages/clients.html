<style>
  .cliente-activo {
    border-left: 4px solid #4caf50;
  }
  .cliente-inactivo {
    border-left: 4px solid #f44336;
  }
  .cliente-moroso {
    border-left: 4px solid #ff9800;
  }
  .deuda-baja {
    background-color: #e8f5e8;
  }
  .deuda-media {
    background-color: #fff3cd;
  }
  .deuda-alta {
    background-color: #f8d7da;
  }
  .tipo-cliente {
    background-color: #e3f2fd;
  }
  .tipo-proveedor {
    background-color: #f3e5f5;
  }
  .badge-tipo {
    padding: 0.35em 0.65em;
    font-size: 0.75em;
    font-weight: 600;
    border-radius: 0.375rem;
  }
  .contact-card {
    transition: all 0.3s ease;
  }
  .contact-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
</style>

<!-- Contenido Principal -->
<div class="container-fluid py-4">
  <!-- Header -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card">
        <div
          class="card-header pb-0 d-flex justify-content-between align-items-center"
        >
          <div>
            <h5>Gestión de Clientes y Proveedores</h5>
            <p class="text-sm">
              Administra tu cartera de clientes y proveedores
            </p>
          </div>
          <div class="d-flex gap-2">
            <button id="btn-nuevo-cliente" class="btn btn-success btn-sm">
              <i class="material-icons me-1">person_add</i>
              Nuevo Cliente
            </button>
            <button id="btn-nuevo-proveedor" class="btn btn-info btn-sm">
              <i class="material-icons me-1">local_shipping</i>
              Nuevo Proveedor
            </button>
            <button id="btn-exportar-clientes" class="btn btn-warning btn-sm">
              <i class="material-icons me-1">download</i>
              Exportar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Resumen General -->
  <div class="row mb-4">
    <!-- Total Clientes -->
    <div class="col-xl-3 col-md-6 mb-4">
      <div class="card card-summary success">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <p class="text-sm mb-1">Total Clientes</p>
              <h4 id="total-clientes" class="mb-0">0</h4>
              <small class="text-muted"
                >Activos: <span id="clientes-activos">0</span></small
              >
            </div>
            <i class="material-icons text-success opacity-6">groups</i>
          </div>
        </div>
      </div>
    </div>

    <!-- Total Proveedores -->
    <div class="col-xl-3 col-md-6 mb-4">
      <div class="card card-summary info">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <p class="text-sm mb-1">Total Proveedores</p>
              <h4 id="total-proveedores" class="mb-0">0</h4>
              <small class="text-muted"
                >Activos: <span id="proveedores-activos">0</span></small
              >
            </div>
            <i class="material-icons text-info opacity-6">local_shipping</i>
          </div>
        </div>
      </div>
    </div>

    <!-- Cuentas Corrientes -->
    <div class="col-xl-3 col-md-6 mb-4">
      <div class="card card-summary warning">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <p class="text-sm mb-1">Cuentas Corrientes</p>
              <h4 id="total-cc" class="mb-0">0</h4>
              <small class="text-muted"
                >Saldo total: <span id="saldo-cc-total">$0.00</span></small
              >
            </div>
            <i class="material-icons text-warning opacity-6">account_balance</i>
          </div>
        </div>
      </div>
    </div>

    <!-- Clientes Morosos -->
    <div class="col-xl-3 col-md-6 mb-4">
      <div class="card card-summary danger">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <p class="text-sm mb-1">Clientes Morosos</p>
              <h4 id="clientes-morosos" class="mb-0">0</h4>
              <small class="text-muted"
                >Deuda: <span id="deuda-morosa">$0.00</span></small
              >
            </div>
            <i class="material-icons text-danger opacity-6">warning</i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Filtros y Búsqueda -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card">
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-3">
              <label class="form-label">Tipo</label>
              <select id="filtro-tipo" class="form-select">
                <option value="">Todos</option>
                <option value="cliente">Clientes</option>
                <option value="proveedor">Proveedores</option>
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label">Estado</label>
              <select id="filtro-estado" class="form-select">
                <option value="">Todos</option>
                <option value="activo">Activos</option>
                <option value="inactivo">Inactivos</option>
                <option value="moroso">Morosos</option>
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label">Cuenta Corriente</label>
              <select id="filtro-cc" class="form-select">
                <option value="">Todos</option>
                <option value="con_cc">Con Cuenta Corriente</option>
                <option value="sin_cc">Sin Cuenta Corriente</option>
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label">Buscar</label>
              <div class="input-group">
                <input
                  type="text"
                  id="buscar-cliente"
                  class="form-control"
                  placeholder="Nombre, email, teléfono..."
                />
                <button class="btn btn-outline-primary" type="button">
                  <i class="material-icons">search</i>
                </button>
              </div>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-12 text-end">
              <button id="btn-aplicar-filtros" class="btn btn-primary btn-sm">
                <i class="material-icons me-1">filter_alt</i>
                Aplicar Filtros
              </button>
              <button
                id="btn-limpiar-filtros"
                class="btn btn-outline-secondary btn-sm"
              >
                <i class="material-icons me-1">clear</i>
                Limpiar
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Lista de Clientes/Proveedores -->
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header pb-0">
          <div
            class="d-flex justify-content-between align-items-center flex-wrap gap-2"
          >
            <div>
              <h6>Lista de Contactos</h6>
              <p class="text-sm mb-0" id="table-info">Cargando contactos...</p>
            </div>
            <div class="d-flex gap-2">
              <button
                id="btn-refresh-clientes"
                class="btn btn-outline-primary btn-sm"
              >
                <i class="material-icons me-1">refresh</i>
                Actualizar
              </button>
            </div>
          </div>
        </div>
        <div class="card-body px-0 pt-0 pb-2">
          <div class="table-responsive p-0">
            <table class="table align-items-center mb-0">
              <thead>
                <tr>
                  <th
                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"
                  >
                    Contacto
                  </th>
                  <th
                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2"
                  >
                    Tipo
                  </th>
                  <th
                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"
                  >
                    Contacto
                  </th>
                  <th
                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"
                  >
                    Cuenta Corriente
                  </th>
                  <th
                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"
                  >
                    Límite Crédito
                  </th>
                  <th
                    class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"
                  >
                    Estado
                  </th>
                  <th class="text-secondary opacity-7">Acciones</th>
                </tr>
              </thead>
              <tbody id="clientes-table-body">
                <tr>
                  <td colspan="7" class="text-center py-4">
                    <div class="spinner-border" role="status">
                      <span class="visually-hidden">Cargando contactos...</span>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Paginación -->
          <div
            class="card-footer d-flex justify-content-between align-items-center"
          >
            <div class="text-sm text-muted" id="pagination-info">
              Mostrando 0 contactos
            </div>
            <nav>
              <ul
                class="pagination pagination-sm mb-0"
                id="pagination-controls"
              >
                <!-- Controles de paginación -->
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal Nuevo Cliente/Proveedor -->
<div class="modal fade" id="modal-nuevo-contacto" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modal-contacto-title">Nuevo Cliente</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
        ></button>
      </div>
      <div class="modal-body">
        <form id="form-nuevo-contacto">
          <input type="hidden" id="contacto-id" />
          <input type="hidden" id="contacto-tipo" value="cliente" />

          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label class="form-label">Tipo de Contacto</label>
                <select id="tipo-contacto" class="form-select" required>
                  <option value="cliente">Cliente</option>
                  <option value="proveedor">Proveedor</option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label class="form-label">Estado</label>
                <select id="estado-contacto" class="form-select" required>
                  <option value="activo">Activo</option>
                  <option value="inactivo">Inactivo</option>
                </select>
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-md-6">
              <div class="form-group">
                <label class="form-label">Nombre/Razón Social *</label>
                <div class="input-group input-group-outline">
                  <input
                    type="text"
                    id="nombre-contacto"
                    class="form-control"
                    required
                  />
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label class="form-label">Documento *</label>
                <div class="input-group input-group-outline">
                  <input
                    type="text"
                    id="documento-contacto"
                    class="form-control"
                    required
                  />
                </div>
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-md-6">
              <div class="form-group">
                <label class="form-label">Email</label>
                <div class="input-group input-group-outline">
                  <input
                    type="email"
                    id="email-contacto"
                    class="form-control"
                  />
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label class="form-label">Teléfono</label>
                <div class="input-group input-group-outline">
                  <input
                    type="tel"
                    id="telefono-contacto"
                    class="form-control"
                  />
                </div>
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-12">
              <div class="form-group">
                <label class="form-label">Dirección</label>
                <div class="input-group input-group-outline">
                  <textarea
                    id="direccion-contacto"
                    class="form-control"
                    rows="2"
                  ></textarea>
                </div>
              </div>
            </div>
          </div>

          <!-- Cuenta Corriente -->
          <div class="row mt-3" id="seccion-cuenta-corriente">
            <div class="col-12">
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="habilitar-cc"
                />
                <label class="form-check-label" for="habilitar-cc"
                  >Habilitar Cuenta Corriente</label
                >
              </div>
            </div>
          </div>

          <div class="row mt-3" id="detalles-cc" style="display: none">
            <div class="col-md-6">
              <div class="form-group">
                <label class="form-label">Límite de Crédito</label>
                <div class="input-group input-group-outline">
                  <input
                    type="number"
                    id="limite-credito"
                    class="form-control"
                    step="0.01"
                    min="0"
                    value="0"
                  />
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label class="form-label">Días de Crédito</label>
                <div class="input-group input-group-outline">
                  <input
                    type="number"
                    id="dias-credito"
                    class="form-control"
                    min="0"
                    value="30"
                  />
                </div>
              </div>
            </div>
          </div>

          <!-- Información adicional para proveedores -->
          <div class="row mt-3" id="seccion-proveedor" style="display: none">
            <div class="col-md-6">
              <div class="form-group">
                <label class="form-label">Contacto Comercial</label>
                <div class="input-group input-group-outline">
                  <input
                    type="text"
                    id="contacto-comercial"
                    class="form-control"
                  />
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label class="form-label">Condiciones de Pago</label>
                <div class="input-group input-group-outline">
                  <input
                    type="text"
                    id="condiciones-pago"
                    class="form-control"
                  />
                </div>
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-12">
              <div class="form-group">
                <label class="form-label">Observaciones</label>
                <div class="input-group input-group-outline">
                  <textarea
                    id="observaciones-contacto"
                    class="form-control"
                    rows="3"
                  ></textarea>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancelar
        </button>
        <button type="button" class="btn btn-success" id="btn-guardar-contacto">
          Guardar Contacto
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Detalle Contacto -->
<div class="modal fade" id="modal-detalle-contacto" tabindex="-1">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Detalle del Contacto</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
        ></button>
      </div>
      <div class="modal-body" id="detalle-contacto-content">
        <!-- Contenido del detalle -->
      </div>
    </div>
  </div>
</div>

<!-- Modal Cuenta Corriente -->
<div class="modal fade" id="modal-cuenta-corriente" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
          Cuenta Corriente - <span id="cc-nombre-cliente"></span>
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
        ></button>
      </div>
      <div class="modal-body">
        <div class="row mb-4">
          <div class="col-md-4">
            <div class="card bg-light">
              <div class="card-body text-center">
                <h6>Saldo Actual</h6>
                <h3 id="cc-saldo-actual" class="mb-0">$0.00</h3>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card bg-light">
              <div class="card-body text-center">
                <h6>Límite de Crédito</h6>
                <h3 id="cc-limite-credito" class="mb-0">$0.00</h3>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card bg-light">
              <div class="card-body text-center">
                <h6>Disponible</h6>
                <h3 id="cc-disponible" class="mb-0">$0.00</h3>
              </div>
            </div>
          </div>
        </div>

        <div class="d-flex justify-content-between align-items-center mb-3">
          <h6>Movimientos de Cuenta Corriente</h6>
          <button class="btn btn-sm btn-success" id="btn-nuevo-movimiento-cc">
            <i class="material-icons me-1">add</i>
            Nuevo Movimiento
          </button>
        </div>

        <div class="table-responsive">
          <table class="table table-sm">
            <thead>
              <tr>
                <th>Fecha</th>
                <th>Concepto</th>
                <th>Debe</th>
                <th>Haber</th>
                <th>Saldo</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody id="movimientos-cc-body">
              <!-- Movimientos de cuenta corriente -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
